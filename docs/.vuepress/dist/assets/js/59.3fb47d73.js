(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{298:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"设计模式之美"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计模式之美","aria-hidden":"true"}},[t._v("#")]),t._v(" 设计模式之美")]),t._v(" "),a("h2",{attrs:{id:"_31-33-改善代码质量的-20-条编程规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_31-33-改善代码质量的-20-条编程规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 31-33 改善代码质量的 20 条编程规范")]),t._v(" "),a("h3",{attrs:{id:"命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名","aria-hidden":"true"}},[t._v("#")]),t._v(" 命名")]),t._v(" "),a("p",[t._v("大到项目名、模块名、包名、对外暴露的接口，小到类名、函数名、变量名、参数名。\n实在想不到，到 github 用相关关键词联想搜索。")]),t._v(" "),a("p",[t._v("命名长度：能够表达含义时，越短越好。常用默认的")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sec -> second, str -> string，num\ndoc -> document\n")])])]),a("p",[t._v("作用域小，名称短，作用域大，名称稍微长。换位思考命名是否直观。\n利用上下文简化命名。\n可读、可搜索。符合项目统一的习惯。\n接口和抽象类，I -> Interface，接口 IUserService 实现类名 UserService 或者 接口 UserService ，实现加 Impl，用 UserServiceImpl。抽象类同理，带 Abstract 或不带。只要项目统一。")]),t._v(" "),a("h3",{attrs:{id:"注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注释","aria-hidden":"true"}},[t._v("#")]),t._v(" 注释")]),t._v(" "),a("p",[t._v("目的是让代码更容易看懂。做什么 what、为什么 why、怎么做 how，复杂的要写如何用\n注释多了表示代码不够可读，而且会干扰代码，后期维护成本也高，代码改了，注释会忘记同步修改，会迷惑。")]),t._v(" "),a("h3",{attrs:{id:"代码风格"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码风格","aria-hidden":"true"}},[t._v("#")]),t._v(" 代码风格")]),t._v(" "),a("p",[t._v("类、函数长度宽度，保证一屏幕 50 行和一行 100 字符，否则不利于阅读。")]),t._v(" "),a("p",[t._v("善用空格分割单元块")]),t._v(" "),a("p",[t._v("四格缩进还是两格锁进，内部统一即可。 2 格节省空间。")]),t._v(" "),a("p",[t._v("大括号是否另起一行。")]),t._v(" "),a("p",[t._v("类中成员排列顺序， 按字母序从小到大。类中，先静态后非静态。作用域范围 public -> protect -> private。")]),t._v(" "),a("h3",{attrs:{id:"编程技巧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编程技巧","aria-hidden":"true"}},[t._v("#")]),t._v(" 编程技巧")]),t._v(" "),a("ol",[a("li",[t._v("把代码分割成更小的单元块")]),t._v(" "),a("li",[t._v("避免函数参数过多。最多 4 个。考虑函数是否职责单一，是否能拆分来减少参数。参数使用对象。")]),t._v(" "),a("li",[t._v("不要用函数参数来控制逻辑。违反了单一职责原则和接口隔离原则。建议拆分。")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buyCourse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" courseId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" isVip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将其拆分成两个函数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buyCourse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" courseId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buyCourseForVip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" courseId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("如果函数是私有函数，影响范围有限，或者拆分后的两个函数经常要同时调用，可以保留标识参数。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拆分成两个函数的调用方式")]),t._v("\nboolean isVip "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...省略其他逻辑...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isVip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buyCourseForVip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" courseId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buyCourse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" courseId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 保留标识参数的调用方式更加简洁")]),t._v("\nboolean isVip "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...省略其他逻辑...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("buyCourse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" courseId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isVip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("还有一种情况是通过 null 判断的。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查询两个时间段的交易")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectTransactions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" end "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("start "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" end "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拆分成")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectTransactionsBetween")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectTransactionsStartWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectTransactionsEndWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectAllTransactions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("函数设计要职责单一。")]),t._v(" "),a("p",[t._v("移除过深的嵌套层次，最多 2 层。方法有：")]),t._v(" "),a("ul",[a("li",[t._v("去掉多余的 if 或 else 语句")]),t._v(" "),a("li",[t._v("使用编程语言提供的 continue、break、return 关键字，提前退出嵌套。")]),t._v(" "),a("li",[t._v("调整执行顺序来减少嵌套。如先判断空。")]),t._v(" "),a("li",[t._v("将部分嵌套逻辑封装成函数调用，以此来减少嵌套。")])]),t._v(" "),a("p",[t._v("学会使用解释性变量")]),t._v(" "),a("ul",[a("li",[t._v("常量取代魔法数字，PI -> 3.14")]),t._v(" "),a("li",[t._v("使用解释性变量来解释复杂表达式。 isSummer = data >= 6 && data < 8")])]),t._v(" "),a("h3",{attrs:{id:"统一编码规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#统一编码规范","aria-hidden":"true"}},[t._v("#")]),t._v(" 统一编码规范")]),t._v(" "),a("p",[t._v("项目、团队，甚至公司，一定要制定统一的编码规范，并且通过 Code Review 督促执行，这对提高代码质量有立竿见影的效果。")])])}),[],!1,null,null,null);s.default=e.exports}}]);